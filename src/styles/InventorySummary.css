/* styles/InventorySummary.css */

/* --- TAREA 21: Convertir en carrusel --- */
.inventory-carousel {
  display: flex; /* 1. Convertir en fila */
  overflow-x: auto; /* 2. Habilitar scroll horizontal */
  gap: 12px;
  width: 100%;
  max-width: 100%; /* evitar que el contenedor crezca sin límite */
  align-items: center;
  -webkit-overflow-scrolling: touch; /* suaviza scroll en móviles */
  box-sizing: border-box; /* incluir padding en el ancho */
  flex-wrap: nowrap; /* evitar wrap, obligar scroll */
  overflow-y: hidden; /* evitar scrollbar vertical inesperado */

  /* Para que funcione aunque haya reglas globales que interfieran, aumentamos especificidad */
}

/* Especificidad adicional: cuando está dentro de una dashboard card */
.dashboard-card .inventory-carousel {
  display: flex;
  overflow-x: auto;
  gap: 12px;
  width: 100%;
  max-width: 100%;
  align-items: center;
  padding-bottom: 12px; /* espacio para scrollbar */
  scroll-snap-type: x mandatory; /* ayuda al UX del carrusel */
  box-sizing: border-box;
  flex-wrap: nowrap;
}

/* Estilizado ligero de scrollbar para mejor apariencia */
.inventory-carousel::-webkit-scrollbar {
  height: 8px;
}
.inventory-carousel::-webkit-scrollbar-thumb {
  background: rgba(0, 0, 0, 0.08);
  border-radius: 8px;
}

/* --- TAREA 21: Desacoplar de .financial-item --- */
/* Creamos un estilo de item propio para el inventario */
.inventory-item {
  background-color: #f8f9fa;
  padding: 12px;
  border-radius: 8px;
  /* --- TAREA 21: Ajuste de tamaño --- */
  flex: 0 0 auto; /* evita que los items crezcan o encojan */
  width: auto; /* El ancho se ajusta al contenido */
  min-width: 160px; /* Ancho mínimo razonable para visibilidad */
  display: flex;
  flex-direction: column;
  justify-content: center;
  scroll-snap-align: center; /* alineación en scroll-snap */
}

/* Wrapper para colocar controles prev/next */
.inventory-carousel-wrapper {
  position: relative;
  width: 100%;
}

/* Añadimos espacio lateral para que los items no queden debajo de los botones */
.dashboard-card .inventory-carousel {
  /* padding lateral eliminado: ya no es necesario */
  padding-left: 0;
  padding-right: 0;
}

.dashboard-card.inventory-card .inventory-carousel {
  padding-top: 8px;
}

.inventory-carousel.is-centered {
  justify-content: center; /* centra si no hay overflow */
}

.inventory-prev,
.inventory-next {
  /* Reset minimal para evitar herencia de estilos globales */
  all: unset;
  box-sizing: border-box;

  position: absolute;
  top: 50%;
  transform: translateY(-50%);

  /* Propiedades restauradas explícitamente */
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
  border-radius: 50%;
  background: rgba(255, 255, 255, 0.95);
  border: 1px solid #e9ecef;
  color: #212529;
  font-size: 14px;
  line-height: 1;
  cursor: pointer;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.06);
  text-align: center;
  z-index: 5;
}

.inventory-prev {
  left: 8px;
}
.inventory-next {
  right: 8px;
}

/* Mover ligeramente los botones hacia afuera para que no tapen el contenido */
.inventory-prev {
  left: -8px;
}
.inventory-next {
  right: -8px;
}

.inventory-prev[disabled],
.inventory-next[disabled] {
  /* Disabled hidden by default; start offset horizontally so they slide in left/right */
  opacity: 0;
  cursor: default;
  pointer-events: none;
}

/* Ocultar botones cuando el wrapper esté marcado como centrado */
.inventory-carousel-wrapper.is-centered .inventory-prev,
.inventory-carousel-wrapper.is-centered .inventory-next {
  display: none !important;
}

/* Mostrar controles solo al hacer hover del wrapper, mantener visibles si tienen focus (accesible) */
.inventory-prev,
.inventory-next {
  opacity: 0;
  /* Transición de opacidad y transform para slide-in */
  transition: opacity 180ms ease, transform 180ms ease;
  pointer-events: none; /* evitar interacción cuando ocultos */
}

/* Aplicar pequeño offset horizontal cuando están ocultos para efecto slide */
.inventory-prev {
  transform: translateY(-50%) translateX(-6px);
}
.inventory-next {
  transform: translateY(-50%) translateX(6px);
}

.dashboard-card:hover .inventory-prev,
.dashboard-card:hover .inventory-next {
  opacity: 1;
  pointer-events: auto;
  transform: translateY(-50%) translateX(0);
}

/* Al mostrarse (hover), regresan al centro vertical y sin offset horizontal */
/* removed wrapper hover transforms to avoid double-hover slide; card hover handles transform */

/* Si el botón recibe foco (teclado), debe ser visible */
.inventory-prev:focus,
.inventory-next:focus,
.inventory-prev:focus-visible,
.inventory-next:focus-visible {
  opacity: 1 !important;
  pointer-events: auto !important;
  transform: translateY(-50%) translateX(0) !important;
}

/* Accesibilidad: foco visible */
.inventory-prev:focus-visible,
.inventory-next:focus-visible {
  outline: 2px solid rgba(52, 58, 64, 0.12);
  outline-offset: 2px;
}

/* Reglas de mayor especificidad para bloquear estilos globales de `button` */
.dashboard-card .inventory-carousel-wrapper .inventory-prev,
.dashboard-card .inventory-carousel-wrapper .inventory-next {
  box-sizing: border-box;

  display: inline-flex !important;
  align-items: center !important;
  justify-content: center !important;
  width: 32px !important;
  height: 32px !important;
  border-radius: 50% !important;
  background: rgba(255, 255, 255, 0.95) !important;
  border: 1px solid #e9ecef !important;
  color: #212529 !important;
  font-size: 14px !important;
  line-height: 1 !important;
  cursor: pointer !important;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.06) !important;
  text-align: center !important;
  /* permitir nuestras transiciones para fade + slide */
  transition: opacity 180ms ease, transform 180ms ease !important;
}

/* Asegurar que hover/focus no apliquen transform/scale o sombras globales */
.dashboard-card .inventory-carousel-wrapper .inventory-prev:hover,
.dashboard-card .inventory-carousel-wrapper .inventory-next:hover,
.dashboard-card .inventory-carousel-wrapper .inventory-prev:focus,
.dashboard-card .inventory-carousel-wrapper .inventory-next:focus {
  /* preservar el centrado vertical y el offset horizontal a 0 para evitar jumps; bloqueamos transforms globales */
  transform: translateY(-50%) translateX(0) !important;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.06) !important;
  background: rgba(255, 255, 255, 0.98) !important;
}

/* Anular outlines y estilos de focus globales y aplicar nuestro focus-visible específico */
.dashboard-card .inventory-carousel-wrapper .inventory-prev:focus,
.dashboard-card .inventory-carousel-wrapper .inventory-next:focus {
  outline: none !important;
}

.dashboard-card .inventory-carousel-wrapper .inventory-prev:focus-visible,
.dashboard-card .inventory-carousel-wrapper .inventory-next:focus-visible {
  outline: 2px solid rgba(52, 58, 64, 0.12) !important;
  outline-offset: 2px !important;
}

.dashboard-card:hover .inventory-carousel-wrapper .inventory-prev:disabled,
.dashboard-card:hover .inventory-carousel-wrapper .inventory-next:disabled {
  /* Disabled appears only when card is hovered: attenuated; slide horizontally into place */
  opacity: 0.45 !important;
  pointer-events: none !important;
  transform: translateY(-50%) translateX(0) !important;
}

/* Ensure disabled buttons start with the same horizontal offset as enabled ones */
.inventory-prev[disabled] {
  transform: translateY(-50%) translateX(-6px);
}
.inventory-next[disabled] {
  transform: translateY(-50%) translateX(6px);
}

.inventory-title {
  font-size: 0.8rem;
  font-weight: 500;
  color: #6c757d;
  margin: 0 0 4px 0;
  white-space: nowrap; /* Evita que el título se parta */
}

.inventory-value {
  font-size: 1.25rem;
  font-weight: 600;
  color: #212529;
  margin: 0;
  white-space: nowrap;
}
